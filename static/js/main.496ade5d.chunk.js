(this.webpackJsonpcovidsweeper=this.webpackJsonpcovidsweeper||[]).push([[0],{33:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(12),c=n.n(a),i=(n(33),n(9)),l=n(22),s=n(56),u=n(60),d=n(58),v=function(e,t,n){for(var r=[],o=0;o<e;o++)for(var a=0;a<t;a++)r.push({x:o,y:a});return function(e){for(var t,n=e.length,r=0;n--;)r=Math.floor(Math.random()*(n+1)),t=e[n],e[n]=e[r],e[r]=t;return e}(r).slice(0,n)},b="black",f=[b,"#0000fd","#017e00","#fd0000","#010180","#830003","#008080","#000000","#808080"],j=function(e,t){for(var n=[],r=0;r<e;r++){for(var o=[],a=0;a<t;a++)o.push({state:"hidden",hasCovid:!1,covidCellsAround:0});n.push(o)}return n},h=function(e,t){var n=t.x,r=t.y;e[n][r].hasCovid=!0,C(e,t)},x=function(e,t){var n=t.x,r=t.y;return[{x:n-1,y:r-1},{x:n-1,y:r},{x:n-1,y:r+1},{x:n,y:r-1},{x:n,y:r+1},{x:n+1,y:r-1},{x:n+1,y:r},{x:n+1,y:r+1}].filter((function(t){return function(e,t){var n=t.x,r=t.y;return e.length>n&&n>=0&&e[n].length>r&&r>=0}(e,t)}))},C=function(e,t){x(e,t).forEach((function(t){e[t.x][t.y].covidCellsAround++}))},m=function(e,t){if("game-over"===e&&t.hasCovid)return{value:"\ud83e\udda0",textColor:b,visible:!0};switch(t.state){case"vaccinated":return{value:"\ud83d\udc89",textColor:b,visible:!1};case"hidden":return{value:" ",textColor:b,visible:!1};case"visible":return function(e){return e.hasCovid?{value:"\ud83e\udda0",textColor:b,visible:!0}:0===e.covidCellsAround?{value:" ",textColor:b,visible:!0}:{value:e.covidCellsAround.toString(),textColor:(t=e.covidCellsAround,f[t]),visible:!0};var t}(t)}},O=function(e){for(var t=[],n=0;n<e.length;n++){for(var r=[],o=0;o<e[n].length;o++){var a=e[n][o];r.push({state:a.state,hasCovid:a.hasCovid,covidCellsAround:a.covidCellsAround})}t.push(r)}return t},g=function e(t,n,r,o){var a=n.x,c=n.y;if("vaccinated"===t[a][c].state||"visible"===t[a][c].state)return{cellsData:t,cellsOpenCount:r};var i=O(t);i[a][c].state="visible";var l=r+1;return i[a][c].covidCellsAround>0||!o?{cellsData:i,cellsOpenCount:l}:x(t,n).reduce((function(t,n){return e(t.cellsData,n,t.cellsOpenCount,!0)}),{cellsData:i,cellsOpenCount:l})},p=n(4),y=n.n(p),w=n(2),k=Object(s.a)((function(){return Object(u.a)({common:{height:30,width:30,borderStyle:"solid",backgroundColor:"lightgray",fontFamily:"Lato-Black",fontSize:16},hidden:{borderWidth:2,borderColor:"white grey grey white"},visible:{borderLeftWidth:1,borderTopWidth:1,borderRightWidth:0,borderBottomWidth:0,borderColor:"grey",color:function(e){return e.textColor}}})})),S=function(e){var t=e.gameState,n=e.data,r=e.onClick,o=m(t,n),a=o.value,c=o.textColor,i=o.visible,l=k({textColor:c});return Object(w.jsx)(d.a,{item:!0,xs:4,children:Object(w.jsx)("button",{onClick:"win"===t||"game-over"===t?void 0:r,className:i?y()(l.common,l.visible):y()(l.common,l.hidden),children:a})})},D=Object(s.a)((function(){return Object(u.a)({sunken:{borderStyle:"solid",borderWidth:2,borderColor:"grey white white grey",backgroundColor:"lightgray"},raised:{borderStyle:"solid",borderWidth:2,borderColor:"white grey grey white",backgroundColor:"lightgray"}})})),N=Object(s.a)((function(){return Object(u.a)({root:{display:"flex",flexDirection:"column"},column:{display:"flex",flexDirection:"column"},row:{display:"flex",flexDirection:"row"}})})),A=function(e){var t=e.cellsData,n=e.gameState,r=e.onClick,o=N(),a=D();return Object(w.jsx)("div",{className:y()(a.sunken,o.root),children:t.map((function(e,t){return Object(w.jsx)("div",{className:o.row,children:e.map((function(e,a){return Object(w.jsx)("div",{className:o.column,children:Object(w.jsx)(S,{gameState:n,data:e,onClick:function(){return r({x:t,y:a})}})},"".concat(t,"-").concat(a))}))},"".concat(t))}))})},B=Object(s.a)((function(){return Object(u.a)({root:{fontFamily:"DSEG7ClassicRegular",fontSize:30,backgroundColor:"black",position:"relative"},counter:{color:"red",position:"absolute",top:0,right:0},counterBackground:{color:"darkred"}})})),E=function(e){var t=e.value,n=B(),r=D();return Object(w.jsxs)("div",{className:y()(r.sunken,n.root),children:[Object(w.jsx)("div",{className:n.counterBackground,children:999}),Object(w.jsx)("div",{className:n.counter,children:t})]})},L=Object(s.a)((function(){return Object(u.a)({root:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:2},button:{fontSize:20}})})),W=function(e){switch(e){case"idle":case"playing":return"\ud83d\ude37";case"game-over":return"\ud83e\udd12";case"win":return"\ud83d\ude0e"}},I=function(e){var t=e.pendingVaccineCells,n=e.seconds,r=e.gameState,o=e.onButton,a=L(),c=D();return Object(w.jsxs)("div",{className:y()(c.sunken,a.root),children:[Object(w.jsx)(E,{value:t}),Object(w.jsx)("button",{className:y()(c.raised,a.button),onClick:o,children:W(r)}),Object(w.jsx)(E,{value:n})]})},V=Object(s.a)((function(){return Object(u.a)({root:{display:"flex",flexDirection:"column"},button:{padding:4}})})),z=function(e){var t=e.levels,n=e.onLevel,r=V(),o=D();return Object(w.jsx)("div",{className:y()(o.sunken,r.root),children:t.map((function(e,t){return Object(w.jsx)("button",{className:y()(o.raised,r.button),onClick:function(){return n(e)},children:e.text},t)}))})},M={text:"Beginner",columns:9,rows:9,covidCells:10},F=[M,{text:"Intermediate",columns:16,rows:16,covidCells:40},{text:"Expert",columns:30,rows:16,covidCells:99}],J=n(59),R=o.a.memo(I),T=o.a.memo(A),G=o.a.memo(z),q=Object(s.a)((function(){return Object(u.a)({root:{marginTop:20,display:"flex",flexDirection:"column",alignItems:"center"},main:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:8},spacer:{height:10}})})),H=function(){var e=q();return Object(w.jsx)("div",{className:e.spacer,children:" "})},K=function(){var e=o.a.useState(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=o.a.useState(M),c=Object(i.a)(a,2),s=c[0],u=c[1],d=o.a.useState(0),b=Object(i.a)(d,2),f=b[0],x=b[1],C=o.a.useState("idle"),m=Object(i.a)(C,2),p=m[0],k=m[1],S=o.a.useState([]),N=Object(i.a)(S,2),A=N[0],B=N[1],E=o.a.useState(0),L=Object(i.a)(E,2),W=L[0],I=L[1],V=o.a.useState(0),z=Object(i.a)(V,2),K=z[0],P=z[1],Q=o.a.useState(0),U=Object(i.a)(Q,2),X=U[0],Y=U[1];Object(l.useInterval)((function(){Y(X+1)}),"playing"===p?1e3:null);var Z=o.a.useCallback((function(e){r(!1),u(e),k("idle"),B(function(e){var t=e.rows,n=e.columns,r=e.covidCells,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,a=j(t,n);return o(t,n,r).forEach((function(e){return h(a,e)})),a}(e)),x(function(e){var t=e.rows*e.columns-e.covidCells;return t>=0?t:0}(e)),Y(0),I(0),P(e.covidCells)}),[r,u,k,B,Y,I,x,P]),$=o.a.useCallback((function(){k("playing")}),[k]),_=o.a.useCallback((function(e){if("idle"===p&&$(),n){var t=function(e,t,n){var r=t.x,o=t.y;if("visible"===e[r][o].state)return{updatedCellsData:e,vaccineCells:0};if("hidden"===e[r][o].state&&0===n)return{updatedCellsData:e,vaccineCells:0};var a,c,i=O(e);return"vaccinated"===i[r][o].state?(a="hidden",c=-1):(a="vaccinated",c=1),i[r][o].state=a,{updatedCellsData:i,vaccineCells:c}}(A,e,K),r=t.vaccineCells,o=t.updatedCellsData;B(o),P(K-r)}else{var a=function(e,t,n){var r=t.x,o=t.y;if("vaccinated"===e[r][o].state||"visible"===e[r][o].state)return{cellsData:e,cellsOpenCount:0};if(e[r][o].hasCovid){var a=g(e,t,0,!1);return n(),a}return g(e,t,0,!0)}(A,e,(function(){return k("game-over")})),c=a.cellsData,i=a.cellsOpenCount;B(c);var l=W+i;I(l),l===f&&k("win")}}),[$,B,k,I,n,W,A,p,f,K]),ee=o.a.useCallback((function(e){Z(e)}),[Z]),te=function(e){"f"===e.key.toLowerCase()&&r((function(e){return!e}))};o.a.useEffect((function(){return Z(M),window.addEventListener("keydown",te),function(){window.removeEventListener("keydown",te)}}),[Z]);var ne=q(),re=D();return Object(w.jsx)("div",{className:ne.root,children:Object(w.jsxs)("div",{className:y()(re.raised,ne.main),children:[Object(w.jsx)(R,{pendingVaccineCells:K,seconds:X,gameState:p,onButton:function(){return Z(s)}}),Object(w.jsx)(H,{}),Object(w.jsx)(T,{cellsData:A,gameState:p,onClick:_}),Object(w.jsx)(H,{}),Object(w.jsx)(G,{levels:F,onLevel:ee}),Object(w.jsx)(J.a,{onClick:function(){return r(!n)},children:n?"Vaccine enabled":"Vaccine disabled"})]})})};c.a.render(Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(K,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.496ade5d.chunk.js.map